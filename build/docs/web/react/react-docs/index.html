<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-web/react/react-docs">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">react | WEB - 前端开发</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/web/react/react-docs"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="react | WEB - 前端开发"><meta data-rh="true" name="description" content="简介"><meta data-rh="true" property="og:description" content="简介"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/web/react/react-docs"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/web/react/react-docs" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/web/react/react-docs" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="WEB - 前端开发 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="WEB - 前端开发 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.2a379df3.css">
<link rel="preload" href="/assets/js/runtime~main.ac6f8ec9.js" as="script">
<link rel="preload" href="/assets/js/main.26970de1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_DKhd" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/photo.jpg" alt="" class="themedImage_AoFY themedImage--light_ICKC"><img src="/img/photo.jpg" alt="" class="themedImage_AoFY themedImage--dark_nJlp"></div><b class="navbar__title text--truncate">我的WEB文档</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/other-weblinks">文档</a><a href="https://github.com/liaozhongxun" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Boxg"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_M8YT colorModeToggle_WbSm"><button class="clean-btn toggleButton_B05K toggleButtonDisabled__LFC" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_fjht"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_dLoH"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_czcc"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_xnCb docsWrapper_OwYP"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_CBsf" type="button"></button><div class="docPage_tA2a"><aside class="theme-doc-sidebar-container docSidebarContainer_mK2a"><div class="sidebar_yupf"><nav class="menu thin-scrollbar menu_t8eH"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/blogtype/play-rtsp-video">blogtype</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/database/mysql-v2">database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/idea/idea-vscode">idea</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/imd">imd</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/linux/">linux</a><button aria-label="Toggle the collapsible sidebar category &#x27;linux&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/other/other-algorithm">other</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/other-weblinks-yule">Favorites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/other-weblinks">Favorites</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/project/xuepindata-v">project</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/server/C/C-base">server</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tmp/菜单">tmp</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/web/JavaScript/utils/util-js">web</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/web/JavaScript/utils/util-js">JavaScript</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/RegExp/">正则表达式</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/web/issues/issues-html">issues</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/media-webrtc">webrtc</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/web/react/react-docs">react</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/web/react/react-docs">react</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/web/style/style-css3">style</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/web/threejs/base">threejs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/web/tool/web-my-vuecli">tool</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/web/visualization/day01-css3">visualization</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/web/vue/vue-router">vue</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/web-admin">后台管理系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/web-app-uniapp-2023">uni-app 2023</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/web-app-uniapp-mumu">mumu 手机模拟器】</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/web-app-uniapp">uni-app</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/web-css">css</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/web-diskapp-electron">electron</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/web-html">html</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/web-script-es6">ECMAScript</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/web-script-js">JavaScript 基础</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/web-script-ts">TypeScript 基础</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/web/wechat-applet/wechat-mini-app-2023">wechat-applet</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/兼容问题">兼容问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/性能优化问题">性能优化问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/web/设计模式">设计模式</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/window/win-11">window</a></div></li></ul></nav></div></aside><main class="docMainContainer_LtR_"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_JRco"><div class="docItemContainer_KVPg"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer__qF7" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_ztdt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">web</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">react</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">react</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_rxiX theme-doc-toc-mobile tocMobile_bFl0"><button type="button" class="clean-btn tocCollapsibleButton_dT4k">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>react</h1></header><h3 class="anchor anchorWithStickyNavbar_cclw" id="简介">简介<a class="hash-link" href="#简介" title="Direct link to heading">​</a></h3><p><a href="https://zh-hans.reactjs.org" target="_blank" rel="noopener noreferrer">官网</a></p><p>声明式编程：（维护状态，根据状态改变更新熏染UI界面） UI=f(state）</p><p>组件化开发：</p><h4 class="anchor anchorWithStickyNavbar_cclw" id="开发依赖">开发依赖<a class="hash-link" href="#开发依赖" title="Direct link to heading">​</a></h4><p>必须依赖三个包</p><ul><li><p><strong>react</strong>：包含<code>react</code>所有核心代码</p><ul><li>包含<code>react web</code> 和 <code>react-native</code>所共同拥有的核心代码</li></ul></li><li><p><strong>react-dom</strong>：<code>react</code> 熏染在不同平台所需要的核心代码</p><ul><li>针对<code>web</code> 和<code>native</code>所完成的事情不同</li><li>web端：<code>reacte-dom</code>会将<code>jsx</code>最终渲染成真是DOM,显示在浏览器中</li><li>native端：<code>react-dom</code> 会将<code>jsx</code>最终渲染成原生控件</li></ul></li><li><p><strong>babel</strong>：将jsx转换成React代码的工具</p></li></ul><hr><h4 class="anchor anchorWithStickyNavbar_cclw" id="对比vue">对比vue<a class="hash-link" href="#对比vue" title="Direct link to heading">​</a></h4><p>react：用户手动 setState 的时候 去重新执行 render 函数</p><p>vue：data数据改变直接劫持重新渲染模板</p><h3 class="anchor anchorWithStickyNavbar_cclw" id="组件">组件<a class="hash-link" href="#组件" title="Direct link to heading">​</a></h3><p>将页面<strong>拆分</strong>为无数个<strong>小的组件</strong>，每个组件完成自己的<strong>独立功能</strong>，<strong>方便</strong>页面的<strong>关联</strong>与<strong>维护</strong> 与 <strong>复用</strong></p><p>每个<strong>单页面</strong>应用就是一棵<strong>组件树</strong>，么个组件都将 <strong>state 数据</strong> 、<strong>方法</strong>、<strong>render</strong> 关联起来</p><p>组件类型，前面的<strong>注重UI</strong>， 后面的<strong>注重逻辑</strong></p><blockquote><p>  根据组件<strong>定义方式</strong>：<strong>函数组件 </strong>和 <strong>类组件</strong></p></blockquote><blockquote><p>  根据内部是否有<strong>状态需要维护</strong>：<strong>无状态组件</strong> 和 <strong>有状态组件</strong></p></blockquote><blockquote><p>  根据组件<strong>职责</strong>：<strong>展示型 组件</strong> 和 <strong>容器型组件</strong></p></blockquote><h4 class="anchor anchorWithStickyNavbar_cclw" id="类组件-rpce">类组件 rpce<a class="hash-link" href="#类组件-rpce" title="Direct link to heading">​</a></h4><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 1、组件名称必须大写开头  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 2、类组件必须继承 React.Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 3、必须实现 render，也是唯一必须实现的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class App extends React.Component {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 组件数据，this.state 固定的，不能改变</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.state = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            message: &quot;Hello World&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 对需要绑定的方法, 提前绑定好this，class下默认绑定的this是undefined，箭头函数就不需要了</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.btnClick = this.btnClick.bind(this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 组件方法(实例方法)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    btnClick() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // setState 是 React.Component 继承的方法  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 内部完成了两件事情:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 1.将state中message值修改掉 2.自动重新执行render函数函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 2.应用类型建议不要直接该，向浅拷贝，改完，再重新全部复制过去，改变引用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.setState({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            message: &quot;Hello React&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  渲染内容 render方法，名称固定 不能改变</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  可以返回react元素、数组|字符串|数值、fragments(高级)、Portals(高级)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    render() { // 里面的this 都是正常指向组件的this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;h2&gt;{this.state.message}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {/* 拿到 btnClick 指针，存到这里，没有调用，当用户点击才调用，所以默认拿不到this的*/}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;button onClick={this.btnClick}&gt;修改文本&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// this绑定的问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// const app = new App()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// const foo = app.btnClick</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// foo(); // 默认绑定 =&gt; window =&gt; 严格模式下 =&gt; undefined  (babel 转换的和class里默认都是严格模式)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// function bar() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//   console.log(&quot;bar:&quot;, this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// bar()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 将组件渲染到界面上</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const root = ReactDOM.createRoot(document.querySelector(&quot;#root&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// App根组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root.render(&lt;App /&gt;);</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_cclw" id="生命周期">生命周期<a class="hash-link" href="#生命周期" title="Direct link to heading">​</a></h5><p>生命周期就是事物从<strong>创建</strong>到<strong>销毁</strong>的过程，了解生命周期，可以让我们在<strong>适合的地方</strong>做想<strong>要做的事情</strong></p><p>生命周期 和 生命周期函数的关系</p><ul><li>整个生命周期有很多个阶段，react可以使<strong>程序</strong>走到<strong>指定阶段</strong>时<strong>自动触发</strong>（回调）相应的<strong>生命周期函数</strong><ul><li>装载阶段（Mount），组件第一层在DOM树种被渲染的过程，组件<strong>挂载到DOM</strong>上就会触发<code>componentDidMount</code></li><li>更新阶段 (Update) , 组件状态发生变化，重新渲染的过程，组件<strong>状态发生更新</strong>触发 <code>componentDidUpdate</code></li><li>卸载阶段（Unmount），组件从DOM树中被移除的过程，就叫<strong>即将移除</strong>触发 <code>componentWillUnmount</code></li></ul></li></ul><p>react 生命周期的过程</p><p><img loading="lazy" src="/assets/images/react-live-fb2263a677aff34a836c6cd11caca633.jpg" width="1410" height="599" class="img_v6r2"></p><ul><li><p>Mounting 挂载阶段</p><ul><li><p><strong>constructor</strong>：创建组件实例 第一个执行 构造方法constructor </p><ul><li>组件 都是一个类，每使用移除 <div></div> 都会创建一个类的实例出来 </li></ul></li><li><p><strong>render</strong>：第二个执行render方法渲染 </p><ul><li><strong>render 完成</strong> React 更新<strong>DOM</strong> 和 <strong>Refs</strong></li></ul></li><li><p><strong>componentDidMount</strong>：进行挂载到DOM上，挂载好就会 触发 <strong>第一个生命周期函数</strong></p><ul><li>依赖dom的操作</li><li>网络请求操作</li><li>处理一些订阅</li></ul></li></ul></li><li><p>更新状态阶段</p><ul><li><strong>setState</strong>：修改状态，修改完成之后<strong>又执行 render</strong> 重新 更新<strong>DOM</strong> 和 <strong>Refs</strong></li><li><strong>componentDidUpdate</strong>：更新完成，触发<strong>第二个生命周期函数</strong></li></ul></li><li><p>卸载阶段</p><ul><li><strong>componentWillUnmount</strong>：将组件从DOM树中移除之后触发 <strong>第三个生命周期函数</strong><ul><li>取消一些订阅，清理操作</li></ul></li></ul></li><li><p>不常用的生命周期</p><ul><li><strong>shouldComponentUpdate</strong>：处于 <strong>setDate 到 render 之间</strong>，如果返回<strong>false</strong>，说明<strong>不需要重新渲染</strong>界面 </li><li><strong>getSnapshotBeforeUpdate</strong>：处于 <strong>render 到 更新DOM 之间</strong>，获取或保存一写DOM更新前的一些信息</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_cclw" id="函数组件--rfcermc">函数组件  rfce，rmc<a class="hash-link" href="#函数组件--rfcermc" title="Direct link to heading">​</a></h4><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 与类组件的差异（不包含hook）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *     没有生命周期，没有生命周期函数，也会被更新并挂载</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *     this 关键字不能指向组件实例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *     内部没有状态 state,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 函数组件存在的缺陷</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *      修改message之后，函数组件不知道自己要重新渲染</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *      如果页面重新渲染，函数被重新执行，又会重新改变message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *      Hook 的出现时函数组件解决了没有state，没有生命周期等问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function App(props){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let message = &quot;lzoxun&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // return 的东西与类组件的一致</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &lt;h1&gt;react元素 {message}&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default App</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_cclw" id="组件通信">组件通信<a class="hash-link" href="#组件通信" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_cclw" id="父子通信props-由父到子">父子通信（props 由父到子）<a class="hash-link" href="#父子通信props-由父到子" title="Direct link to heading">​</a></h5><blockquote><p>  组件存在<strong>嵌套关系</strong>，<strong>嵌进来</strong>的组件称为<strong>子组件</strong>  </p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">// App.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import React from &#x27;react&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Headers from &quot;./components/Headers&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class App extends React.Component {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.state = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            title: &#x27;首页&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            list: [1, 2, 3, 4, 5],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            infos: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name: &#x27;lzo&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                height: &quot;380cm&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            count: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    changeCount(num) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.setState({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            count: this.state.count + num</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    render() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {/* 父传子：向子组件传入一个title等数据 */}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {/* 子传父：向子组件传入回调，接收子组件发送的数据 childExec*/}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;Headers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    title={this.state.title}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    infos={this.state.infos}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    list={this.state.list}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    childExec={(num) =&gt; this.changeCount(num)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    slotele={&lt;div&gt;传入React元素实现插槽&lt;/div&gt;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    sloteleArea={(text) =&gt; &lt;div&gt;{text}&lt;/div&gt;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;div className=&#x27;children-1&#x27;&gt;通过子元素实现插槽效果&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;div className=&#x27;children-2&#x27;&gt;通过 this.props.children 获取组件间的子元素&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/Headers&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div&gt;{this.state.count}&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">/* App.js  =&gt;  Headers.js */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import React from &quot;react&quot;; // imr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import PropTypes from &#x27;prop-types&#x27; // impt 用来限制props数据类型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Headers extends React.Component {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor(props) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // props 接收父组件传入的所有数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super(props);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.state = {};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console.log(this.props); // 可以直接使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    changeData() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.props.childExec(3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    render() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div&gt;父传子 =》 {this.props.title}&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div&gt;子传父 =》 &lt;button onClick={e =&gt; this.changeData()}&gt;+3&lt;/button&gt;&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div className=&quot;slot&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;span className=&quot;left&quot;&gt;子元素的使用 =》 left&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {this.props.children[0]} {/* 弊端就是需要多个子元素的话，所有都在列表，位置无法固定 */}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {this.props.slotele}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {this.props.sloteleArea(&#x27;作用域插槽，内容自定&#x27;)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;span className=&quot;right&quot;&gt;right&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 如果需要限制类型的话，也可以用ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Headers.propTypes = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title: PropTypes.string.isRequired, // 字符串类型，并且必传</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    infos: PropTypes.object,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    list: PropTypes.array,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    slotele: PropTypes.element</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 设置默认值 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Headers.defaultProps = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    list: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    infos: {},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    slotele:&lt;div&gt;默认&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default Headers;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_cclw" id="非父子隔层通信">非父子隔层通信<a class="hash-link" href="#非父子隔层通信" title="Direct link to heading">​</a></h5><blockquote><p>  官方提供的 Context ，数据共享，后期可以用redux代替</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">/* App.js  =&gt;  HeadersChild.js */</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>  EventBus 事件总线，可以监听触发事件传值</p></blockquote><h4 class="anchor anchorWithStickyNavbar_cclw" id="setstate-详细使用">setState 详细使用<a class="hash-link" href="#setstate-详细使用" title="Direct link to heading">​</a></h4><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">/* 1、基本用法 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">this.setState({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message: &quot;hello word&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/* 2、回调函数 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">this.setState((state,props)=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 可以先处理 state,props</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        message: &quot;hello word&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/** </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 3、setState 在 react 事件处理中默认是异步调用 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *    - 异步可以提升性能，获取同一阶段 多个setState改变，批量更新</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *    - 如果是同步的，setState 后，render 还没有执行，state和要给子组件的props不能保存同步</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *    - </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *    - 第二个参数回调中可以拿到最终结果</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">this.setState({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message: &quot;hello word&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">},()=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     console.log(&quot;++++++:&quot;, this.state.message) // 拿到更新后的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/* 4、react 18 之前的同步做法，不是React事件的回调就能同步，之后全部setState做法都是异步的 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     // 在react18之前, setTimeout中setState操作, 是同步操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     // 在react18之后, setTimeout中setState异步操作(批处理)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     this.setState({ message: &quot;hello word 111&quot; })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     console.log(this.state.message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }, 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/* 5、偏要实现同步效果，使用官方的 flushSync*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { flushSync } from &#x27;react-dom&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flushSync(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.setState({ message: &quot;你好啊, 李银河&quot; })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(this.state.message) // 设置后先执行render，再执行这里</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>  数据不可变</p></blockquote><p>应用 类型数据不要去直接修改，如果有变化，解构出来，改好直接，全部替换过去，否则 <strong>PuerComponent</strong> 类组件里不会生效</p><h4 class="anchor anchorWithStickyNavbar_cclw" id="优化">优化<a class="hash-link" href="#优化" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_cclw" id="更新机制">更新机制<a class="hash-link" href="#更新机制" title="Direct link to heading">​</a></h5><p><img loading="lazy" src="/assets/images/2022-12-19_075525-c46e844d253204acf677a7641265478d.jpg" width="1036" height="725" class="img_v6r2"></p><ul><li>通过唯一的、不变的key对比新旧DOM树，尽量复用</li><li>dom树中不会跨层比较</li></ul><h5 class="anchor anchorWithStickyNavbar_cclw" id="shouldcomponentupdate-scu">shouldComponentUpdate （SCU）<a class="hash-link" href="#shouldcomponentupdate-scu" title="Direct link to heading">​</a></h5><ul><li><p>阻止 render 函数被随意执行</p></li><li><p>父组件 <strong>setState</strong> 被调用，即使<strong>数据没变</strong>， <strong>render函数</strong>会被<strong>重新执行</strong>，<strong>所有子组件</strong>都会重新渲染</p></li></ul><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">/* 原理通过生命周期 shouldComponentUpdate(nexeProps,newState) SCU拦截优化*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shouldComponentUpdate(newProps,newState){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(this.state.message != newState.message){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/* 子组件 拦截*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shouldComponentUpdate(newProps,newState){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(this.props.message != newProps.message){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/* 上面太繁琐，react提供的解决方案 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/* 类组件 Component 换成 PuerComponent 帮做我们浅层比较上面的朝操作*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import React from &#x27;react&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Headers from &quot;./components/Headers&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class App extends React.PuerComponent {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.state = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    render() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div&gt;&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/* 函数组件 通过memo处理上面的问题*/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/* 正常情况下，通过memo包裹的组件，只有props发生改变，组件才会重新渲染 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const PropFile = memo(function(props){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &lt;h2&gt;{prop.message}&lt;/h2&gt;   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_cclw" id="react-refs-获取-dom">React Refs 获取 dom<a class="hash-link" href="#react-refs-获取-dom" title="Direct link to heading">​</a></h5><blockquote><p>  ref</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">import React, { createRef, forwardRef } from &#x27;react&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Headers from &quot;./components/Headers&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 通过 forwardRef 定义一个函数组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const Headers2 = forwardRef(function(props,ref){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    retrun (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;h1 ref={ref}&gt;Headers2 h1&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class App extends React.PuerComponent {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.state = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.titleRef = createRef();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.titleEl = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.headRef = createRef();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.headRef2 = createRef();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    getNatDom(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 1、直接获取</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console.log(this.refs.lzo);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 2、提前创建好ref对象，绑定到元素上</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console.log(this.titleRef.current)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 3、通过回调得到元素 赋值给 this.titleEl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console.log(this.titleEl)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 4、类组件：通过 ref 获取，函数组件没有实例所有无法获取</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console.log(this.headRef.current) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 5、函数组件，需要forwardRef,拿到 里面的某个节点，如 h1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console.log(this.headRef2.current) // 得到 &lt;h1&gt;Headers2 h1&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    render() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div ref=&#x27;lzo&#x27;&gt;1&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div ref={this.titleRef}&gt;2&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div ref={el =&gt; this.titleEl = el}&gt;3&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;Headers ref={this.headRef}/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;Headers2 ref={this.headRef2}/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;button onClick={e =&gt; this.getNatDom()}&gt;&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default App;</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_cclw" id="受控组件与非受控组件">受控组件与非受控组件<a class="hash-link" href="#受控组件与非受控组件" title="Direct link to heading">​</a></h5><blockquote><p>  react 没有双向搬到，当表单元素绑定 value属性后就变成了 <strong>受控组件</strong>，值交给react控制</p><p>  受控组件是<strong>无法输入</strong>的，只能通过 <strong>onChange</strong> 事件来操作，通过事件对象拿到最新value，赋值到到state上</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">import React, { Component } from &#x27;react&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export class BrotherOne extends Component {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.state = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name: &quot;default&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    changeInput(e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console.log(e.target.value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.setState({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name: e.target.value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 或 批量写法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.setState({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [e.target.name]: e.target.value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    render() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;input value={this.state.name} name=&#x27;name&#x27; onChange={e =&gt; this.changeInput(e)} /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {/* 非受控组件 */}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;input defaultValue={this.state.name} /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default BrotherOne</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_cclw" id="高阶组件hoc">高阶组件（HOC）<a class="hash-link" href="#高阶组件hoc" title="Direct link to heading">​</a></h4><blockquote><p>  高阶函数：接收<strong>另外一个函数</strong>作为<strong>参数</strong> 或 <strong>返回一个函数</strong>作为<strong>返回值</strong> 的函数 </p><p>  高阶组件：本身就是一个函数，接收一个<strong>组件</strong>作为<strong>参数</strong> 并且 <strong>返回一个新的组件</strong>，在渲染之前<strong>拦截</strong>，处理到新组件后返回</p></blockquote><p>应用场景</p><ul><li><p>代替了<strong>Mixin</strong>混入</p></li><li><p>对组件注入数据 </p></li><li><p>封装隔代传值的Context</p></li><li><p><strong>memo</strong>就是一个高阶函数，性能优化也是通过高阶组件方式实现的</p></li><li><p>使用大量HOC，包裹太多层嵌套，也不好，然后出现了<strong>Hooks</strong></p></li></ul><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">// 高阶组件,给使用的组件添加上 title</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default function setTitle(WarpperComponent) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return function (props) { // 函数组件中操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console.log({...props}); // 将父级本来就有的props 和 我们要新增的数据 一起传递给子组件将</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &lt;WarpperComponent {...props} title=&#x27;成功使用高阶组件 setTitle&#x27; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import React, { PureComponent } from &#x27;react&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import setTitle from &#x27;./my-hoc/setTitle&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export class App extends PureComponent {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    render() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const { title } = this.props;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div&gt;App - {title}&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default setTitle(App)</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_cclw" id="高阶应用">高阶应用<a class="hash-link" href="#高阶应用" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_cclw" id="createportal-vue3-teleport">createPortal (vue3 Teleport)<a class="hash-link" href="#createportal-vue3-teleport" title="Direct link to heading">​</a></h5><blockquote><p>  <strong>createPortal</strong>：将React元素挂载到 root 外的其他位置</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">import { createPortal } from &#x27;react-dom&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// jsx中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export class CreatePortal extends PureComponent {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  render() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        createPortal(&lt;div&gt;createPortal&lt;/div&gt;,document.querySelector(&quot;#lzo&quot;)) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {/* lzo元素必须提前存在 */}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_cclw" id="fragment-vue3-fragment">Fragment (vue3 Fragment)<a class="hash-link" href="#fragment-vue3-fragment" title="Direct link to heading">​</a></h5><blockquote><p>  <strong>Fragment</strong>：包裹一段代码而不渲染到页面上，存在类<strong>似 key的属性</strong>无法使用</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">import { Fragment } from &quot;react&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// jsx中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rendel(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Fragment&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div&gt;下面是 Fragment 语法糖，&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/Fragment&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_cclw" id="suspense">Suspense<a class="hash-link" href="#suspense" title="Direct link to heading">​</a></h5><blockquote><p>  异步加载未加载出来时，先使用fallback中的组件</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">const root = ReactDOM.createRoot(document.getElementById(&#x27;root&#x27;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root.render(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;HashRouter&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Suspense fallback={&lt;h3&gt;Loading...&lt;/h3&gt;}&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;App /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/Suspense&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/HashRouter&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_cclw" id="strictmode">StrictMode<a class="hash-link" href="#strictmode" title="Direct link to heading">​</a></h5><blockquote><p>  StrictMode：仅在开发模式下生效的严格模式，也不会渲染到页面上</p></blockquote><p>检测范围，检测到报错提示</p><ul><li>识别不安全不推荐生命周期</li><li>废弃API</li><li>第一种过期的refs用法</li><li>检测一些意外副作用<ul><li><strong>开发环境</strong>中 <strong>constructor</strong>，<strong>生命周期</strong> 会被<strong>故意调用两次</strong>，查看你的代码执行多次时是否会产生一些问题（如事件没有移除）</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_cclw" id="jsx">JSX<a class="hash-link" href="#jsx" title="Direct link to heading">​</a></h3><blockquote><p>  认识 JSX</p></blockquote><p>概念</p><ul><li>JSX 是一种 JavaScript 的语法扩展，或称为 <code>JavaScript XML</code></li><li>它用于描述<strong>UI界面 view,</strong> 并且<strong>完全</strong>可以和J<strong>avaScript融合在一起</strong></li><li>它不同于vue的模板语法，<strong>不需要</strong>专门学习模块语法中的<strong>一些指令</strong>（比如v-for，v-if）</li><li>React 认为 <strong>逻辑渲染</strong>本质上与其他<strong>UI逻辑</strong>存在很强的<strong>内在耦合</strong>（关联性强），所以选择 JSX<ul><li>UI 中绑定事件</li><li>展示数据状态</li><li>状态改变又要改变 UI</li></ul></li></ul><p>位置</p><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">render(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    retrun (); // 这里面 或 放到这里使用的，就是jsx,运行会被bable转成js代码 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>书写规范 <code>retrun () 中</code></p></blockquote><ul><li>只能有<strong>一个根元素</strong></li><li><strong>小括号</strong>，使 JSX 可以换行书写，方便阅读</li><li>单标签必须 <code>/&gt;</code>结尾</li></ul><h4 class="anchor anchorWithStickyNavbar_cclw" id="使用">使用<a class="hash-link" href="#使用" title="Direct link to heading">​</a></h4><ul><li>作为子元素<code>{}</code>插入内容 <strong>Number</strong>、<strong>String</strong>、<strong>Array</strong> 可以直接显示，<strong>undefined</strong>、<strong>null</strong>、<strong>boll </strong> 不显示，<strong>Object对象</strong> 不能直接插入</li></ul><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">// 1.定义App根组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class App extends React.Component {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.state = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            message:&#x27;note&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            count:0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            arr:[1,2,3,4],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            isReady:true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.btnClick = this.btnClick.bind(this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    btnClick(){console.log(this)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    btn2Click = ()=&gt; console.log(this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    btn3Click(){console.log(this)};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    btn4Click(event, name, age) {console.log(event, name, age)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    render() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const {message,count,arr,isReady } = this.state;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const countAdd = count + 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let ele = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(isReady){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ele = &lt;h1&gt;h1&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ele = &lt;h2&gt;h2&lt;/h2&gt;    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            { /* 注释 */ }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                { /* 1、注释 */ }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                { /* 2、插入内容变量 */ }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;h2&gt;{message}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                { /* 3、插入表达式 没有计算属性，可以直接通过js完成*/ }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;h2&gt;{1+2}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;h2&gt;{countAdd}&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                { /* 4、调用方法 */ }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;ul&gt;{arr.map(item=&gt; &lt;li&gt;{item}&lt;/li&gt;)}&lt;/ul&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;ul&gt;{this.getItem}&lt;/ul&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                { /* 5、绑定属性 */ }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;img title={message} src={xxx}&gt;&lt;/img&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;h2 className=&quot;box&quot; &gt;绑定类&lt;/h2&gt; { /* class 是关键字，bable解析可能会产生误解 */ }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;h2 className={`box1 box2 ${countAdd==2?&#x27;box3&#x27;:&#x27;box4&#x27;}`} &gt;绑定类&lt;/h2&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                { /* 6、绑定样式 */ }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 &lt;h2 style={{color: &quot;red&quot;, fontSize: &quot;30px&quot;}}&gt;呵呵呵呵&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                { /* 7、绑定事件 小驼峰*/ }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 &lt;button onClick={this.btnClick}&gt;修改文本&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 &lt;button onClick={this.btn2Click}&gt;按钮2&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 &lt;button onClick={() =&gt; this.btn3Click()}&gt;需要执行&lt;/button&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 &lt;button onClick={(event) =&gt; this.btn4Click(event, &quot;why&quot;, 18)}&gt;按钮4&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                { /* 8、条件渲染 js怎样就怎样 */ }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div&gt;{ele}&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div&gt;{ isReady?&lt;h1&gt;h1&lt;/h1&gt;:&lt;h2&gt;h2&lt;/h2&gt;  }&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div style={{display:isReady ? &#x27;block&#x27;: &#x27;none&#x27;}}&gt;v-show &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                { /* 9、列表渲染 ，如果添加限制，向把arr处理一下再遍历 */ }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div&gt;{arr.map(item=&gt; &lt;div className=&#x27;item&#x27;&gt;item&lt;/div&gt;)}&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    getItem(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        { /* 如果复杂的逻辑 */ }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        retrun this.state.arr.map(item=&gt; &lt;li&gt;{item}&lt;/li&gt;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const root = ReactDOM.createRoot(document.querySelector(&quot;#root&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root.render(&lt;App /&gt;);</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>  Bable 解析 JSX </p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">{/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    React.createElement(type,config,children)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1、bable 将每一个 div 转换为 React.createElement(&quot;div&quot;,null,null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    通过 createElement 组成一个 JavaScript对象树，形成虚拟DOM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2、再通过 document.createElement(&quot;dov&quot;) 转真实DOM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    有一个从 jsx -&gt; 虚拟DOM（js对象 ） -&gt; 真实DOM的过程 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      （jsx没有v-for，事件绑定这些，比较简单，bable可以直接解析，vue比较麻烦，template 通过v-loader来解析）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     虚拟DOM的好处</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - 可以在家js中通过diff算法对比新旧虚拟dom，部分更新</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - 动态判断是渲染成web端可以用的DOM结构，或渲染成其他各个平台认识的结构，实现跨平台</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - 通过root.render 让虚拟DOM和真实DOM同步起来，这个过程叫做协调</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - 只需要告诉react让ui展示什么状态，react去匹配，你不需要手动操作dom、属性、事件，实现声明式编程 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;ul&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;li className=&#x27;item&#x27;&gt;Text&lt;/li&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;li className=&#x27;item&#x27;&gt;Text&lt;/li&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/ul&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 转换后</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">React.createElement(&quot;div&quot;,null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    React.createElement(&quot;ul&quot;,null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        React.createElement(&quot;li&quot;,{className:&#x27;item&#x27;},Text)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_cclw" id="过渡动画">过渡动画<a class="hash-link" href="#过渡动画" title="Direct link to heading">​</a></h3><blockquote><p>  React 社区维护的动画库 <code>react-transition-group</code></p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">// 1、需要额外安装  npm install react-transition-group -S</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * CSSTransition：常用这个来完成过度动画</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *    动画进入的三个阶段 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *        1、开始状态初始化 xxxx-enter   如 opacity:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *        2、执行动画阶段 xxxx-enter-active    如 opacity:1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *        3、执行完成阶段 xxxx-enter-done </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *    动画离开的三个阶段 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *        1、开始状态初始化 xxxx-exit         如 opacity:1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *        2、执行动画阶段 xxxx-exit-active    如 opacity:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *        3、执行完成阶段 xxxx-exit-done </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * SwitchTransition：两个组件显示和隐藏</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * TransitionGroup：包裹多个动画组件，一般用于列表中元素动画</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_cclw" id="react-中的-css">React 中的 CSS<a class="hash-link" href="#react-中的-css" title="Direct link to heading">​</a></h3><p>组件化的是<strong>局部的</strong>，而CSS的设<strong>计是全局</strong>的，所有组件化项目中，需要一个<strong>CSS的解决方案</strong></p><ol><li>编写局部CSS：让CSS具备自己的<strong>作用域</strong>，不会<strong>随意污染</strong>其他组件内的元素</li><li>编写动态CSS：获取当前组件的一些<strong>状态</strong>，<strong>根据不同的状态</strong> 来 <strong>生成不同的CSS</strong></li></ol><h4 class="anchor anchorWithStickyNavbar_cclw" id="常用编写方案">常用编写方案<a class="hash-link" href="#常用编写方案" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_cclw" id="内联样式">内联样式<a class="hash-link" href="#内联样式" title="Direct link to heading">​</a></h5><blockquote><p>  在jsx中通过style接收一个小驼峰命名属性的样式表对象，并且可以应用state中的状态来设置相关样式</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;h2 style={{color: &quot;red&quot;, fontSize: `${titleSize}px`}}&gt;呵呵呵呵&lt;/h2&gt;</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_cclw" id="普通css">普通css<a class="hash-link" href="#普通css" title="Direct link to heading">​</a></h5><blockquote><p>  编写普通css文件，通过 import &quot;xx/xx/xx.css&quot; 映入到组件，缺点：一个组件引入过，其他组件也会生效</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">import &#x27;./index.css&#x27;</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_cclw" id="css-modules">CSS modules<a class="hash-link" href="#css-modules" title="Direct link to heading">​</a></h5><blockquote><p>  CSS modules 并不是react特有的解决方案，而是<strong>webpack提供</strong>的，webpacd.config.js 中的 modules:true</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">import CssIndex from &#x27;./index.module.css&#x27; // 无论是css/scss/less 在正常名字上添加.module就可以</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;h2 className={CssIndex.title}&gt;呵呵呵呵&lt;/h2&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    不能使用index-header 横杆写法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    不方便动态修改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_cclw" id="css-in-js">css in js<a class="hash-link" href="#css-in-js" title="Direct link to heading">​</a></h5><blockquote><p>  CSS 由 JavaScript 生成，而不是外部引入，由第三方库提供</p></blockquote><p>优点</p><ul><li>赋予CSS一些能力，样式嵌套、函数定义、逻辑复用动态修改</li><li>CSS预处理器功能类似，这个<strong>动态状态</strong>更方便</li><li>常见实现<code>css in js</code>库：<code>styled-components</code>、<code>emotion</code>、<code>glamorous</code></li></ul><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">// 1、安装: npm install styled-components -S</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2、常见 style 组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import styled from &quot;styled-components&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { largeSize } from &quot;./style/variables&quot; // 引入入全局变量,假设有 export const largeSize = &quot;18px&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2.1 标签模板字符串，调用styled的div方法，得到一个div组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2.2 可以接收外部传入的props</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2.3 styled.div.attrs({})``</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2.4 从变量文件导入全局的变量 largeSize ，并使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export const AppWrapper = styled.div` </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .select{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        color:#f00;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        font-size:${largeSize}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .title{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        font-size:${props =&gt; props.size}px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .left{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            color:#f0f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 3、jsx 中使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { AppWarpper } from &quot;./style&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class App extends React.Component {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.state = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            size:30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    render() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const { size } = this.state;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        retrun(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {/* div组件 会渲染成一个div标签，样式组件可以层层嵌套 */}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {/* 状态改变，样式自动更新 */}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;AppWarpper size={size}&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div className=&#x27;select&#x27;&gt;&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div className=&#x27;title&#x27;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;div className=&#x27;left&#x27;&gt;&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/AppWarpper&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 4、vscode 安装 vscode-styled-components 插件高亮</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>  标签模板字符串，函数的其他调用方式</p></blockquote><div class="language-javascript codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-javascript codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tagTmpStr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter spread operator" style="color:#393A34">...</span><span class="token parameter">arg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> num </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> tag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;学习&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tagTmpStr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tagTmpStr</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">this is </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">num</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> 个 </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">tag</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// [[&#x27;this is&#x27;,&#x27;个&#x27;,&#x27;&#x27;], 10, 学习]</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_cclw" id="classnames-动态添加类">classnames 动态添加类<a class="hash-link" href="#classnames-动态添加类" title="Direct link to heading">​</a></h4><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">import classNames from &#x27;classnames&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">classNames(&#x27;foo&#x27;, &#x27;bar&#x27;); // =&gt; &#x27;foo bar&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">classNames(&#x27;foo&#x27;, { bar: true }); // =&gt; &#x27;foo bar&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">classNames({ &#x27;foo-bar&#x27;: true }); // =&gt; &#x27;foo-bar&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">classNames(&#x27;a&#x27;, [&#x27;b&#x27;, { c: true, d: false }]); // =&gt; &#x27;a b c&#x27;</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_cclw" id="redux-状态管理">Redux 状态管理<a class="hash-link" href="#redux-状态管理" title="Direct link to heading">​</a></h3><blockquote><p>  纯函数</p></blockquote><p><strong>函数式编程</strong>非常重要的概念<strong>纯函数</strong>，<strong>组件</strong>、<strong>redux 的 reducer</strong> 也必须是纯函数</p><p><strong>纯函数：</strong></p><ul><li>相同的<strong>输入</strong>，得到的<strong>返回值一定相同</strong><ul><li>所有函数不能依赖外部变量  </li></ul></li><li>函数内部的操作<strong>不能影响外部的数据</strong></li><li>优点：写纯函数的时候，<strong>只需要</strong>关心业务逻辑，<strong>不需要</strong>考虑<strong>传入的内容</strong>是怎么获得，或<strong>依赖的外部变量</strong>是否已经<strong>发生修改</strong></li></ul><blockquote><p>  作用</p></blockquote><p>Redux 就是帮助我们<strong>管理State的容器</strong>，Redux是 JavaScript的状态容器，提供了<strong>可预测的状态管理</strong>  </p><p>Redux 必须通过 <strong>派发（dispatch）action</strong>来<strong>更新数据</strong></p><blockquote><p>  三大原则</p></blockquote><p><strong>单一数据源</strong>：一般一个项目只创建一个store，方便state的<strong>维护、追踪、修改</strong></p><p><strong>State是只读的</strong>：唯一修改的方法是<strong>触发action</strong>，通过reducer产生，视图和网络请求也只能通过action描述自己想要修改的state，保证所有修改集中化处理，并按照严格书序来执行</p><p><strong>使用纯函数来执行修改</strong>：通过 reducer 将就的state，和新的action联系在一起，返回新的state</p><blockquote><p>  基础流程图</p></blockquote><p><img loading="lazy" src="/assets/images/2022-12-28_080604-2669d4db94eb633f659c9c2689e44843.jpg" width="1165" height="660" class="img_v6r2"></p><h4 class="anchor anchorWithStickyNavbar_cclw" id="使用-1">使用<a class="hash-link" href="#使用-1" title="Direct link to heading">​</a></h4><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">// yarn add redux  //node 16.10.0 或 &gt;=18.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 一般结构</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">store/index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">store/reducer.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">store/actionCreators.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">store.constants.js</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_cclw" id="action">Action<a class="hash-link" href="#action" title="Direct link to heading">​</a></h4><h4 class="anchor anchorWithStickyNavbar_cclw" id="reducer">Reducer<a class="hash-link" href="#reducer" title="Direct link to heading">​</a></h4><blockquote><p>  reducer 是一个纯函数，作用是将传入的state和action结合起来生成一个新 的state</p></blockquote><h4 class="anchor anchorWithStickyNavbar_cclw" id="toolkit">toolkit<a class="hash-link" href="#toolkit" title="Direct link to heading">​</a></h4><div class="language-shell codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-shell codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> @reduxjs/toolkit react-redux</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>  Toolkit 核心API</p></blockquote><ul><li><strong>configureStore</strong>：包装<code>createStore</code>，提供<strong>简化的配置选项</strong>和<strong>良好的默认值</strong> ，自动组合 <code>slice reducer</code>、添加任何<strong>Redux中间件</strong>、<code>redux-thunk</code>默认包含、启用<code>Redux DevTools Extension</code></li><li><strong>createSlice</strong>：接收reducer函数的对象、切片名称和初始状态。并自动生成reducer，并带有相应actions</li><li><strong>createAsyncThunk</strong>：异步数据操作</li></ul><h4 class="anchor anchorWithStickyNavbar_cclw" id="redux-中间件如何实现">Redux 中间件如何实现<a class="hash-link" href="#redux-中间件如何实现" title="Direct link to heading">​</a></h4><blockquote><p>  派发actions之前拦截，做一些事情（redux-thunk 拦截actions，判断内容是不是一个函数，如果是，就执行得到结果，再继续）</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">// 中间件原理，对每次派发的action进行拦截，打印日志案例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default function log(store){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 保存我们 拦截操作前的 dispatch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const next = store.dispatch;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function logAndDispatch(action){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console.log(&#x27;派发前：&#x27;,action);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 操作完进行它原本的派发操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        next(action);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console.log(&#x27;派发后：&#x27;,store.getState());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Monkey Patching：猴补丁 =&gt; 篡改现有代码，对整体逻辑进行修改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 任何地方执行dispatch 其实是执行 logAndDispatch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    store.dispatch = logAndDispatch;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_cclw" id="开发中如何管理state好">开发中如何管理state好<a class="hash-link" href="#开发中如何管理state好" title="Direct link to heading">​</a></h4><ol><li>有些人，将所有状态放到redux，状态管理库中<strong>方便追踪和共享</strong></li><li>有些人，将某些组件<strong>自己的状态</strong>放到组件内部进行关联</li><li>建议组件ui相关的一些状态，或自己的状态放到组件内部管理，共享状态，包括请求的数据可以交给redux维护 </li><li>...具体情况具体评估</li></ol><h4 class="anchor anchorWithStickyNavbar_cclw" id="调试工具">调试工具<a class="hash-link" href="#调试工具" title="Direct link to heading">​</a></h4><blockquote><p>  React Developer Tools</p></blockquote><blockquote><p>  Redux DevTools</p></blockquote><p>控制台 redux 数据默认是看不到的，建议开发环境开启，生产环境关闭</p><h3 class="anchor anchorWithStickyNavbar_cclw" id="react-router-6x">React Router 6.x<a class="hash-link" href="#react-router-6x" title="Direct link to heading">​</a></h3><div class="language-shell codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-shell codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> react-router-dom </span><span class="token comment" style="color:#999988;font-style:italic"># react 社区维护</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>  基本使用</p></blockquote><ol><li>配置路由类型 <strong>BrowserRouter</strong> 和 <strong>HashRouter</strong></li></ol><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">// index.js </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import React from &#x27;react&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import ReactDOM from &#x27;react-dom/client&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { HashRouter } from &#x27;react-router-dom&#x27;; // 使用配置 HashRouter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const root = ReactDOM.createRoot(document.getElementById(&#x27;root&#x27;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root.render(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;HashRouter&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;App /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/HashRouter&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>路由映射路径，与路由传参</li></ol><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">import React, { PureComponent } from &#x27;react&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { Link, NavLink, Navigate, Route, Routes } from &#x27;react-router-dom&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Home from &#x27;./pages/Home&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import About from &#x27;./pages/About&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Login from &#x27;./pages/Login&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import NotFound from &#x27;./pages/NotFound&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import HomeChild1 from &#x27;./pages/HomeChild1&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import HomeChild2 from &#x27;./pages/HomeChild2&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export class index extends PureComponent {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // constructor() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //     super();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    render() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;div&gt;header&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;div className=&#x27;nav&#x27;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {/* 1、不重要 */}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;Link to=&quot;/home&quot;&gt;首页&lt;/Link&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;Link to=&quot;/about&quot;&gt;关于&lt;/Link&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;Link to=&quot;/login&quot;&gt;登陆&lt;/Link&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {/* 2、不重要  激活自动添加 active 类,动态加style 和 className */}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;NavLink to=&quot;/home&quot; style={({ isActive }) =&gt; ({ color: isActive ? &quot;#f00&quot; : &quot;&quot; })}&gt;首页&lt;/NavLink&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;NavLink to=&quot;/about&quot; style={({ isActive }) =&gt; ({ color: isActive ? &quot;#f00&quot; : &quot;&quot; })}&gt;关于&lt;/NavLink&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;NavLink to=&quot;/login&quot; style={({ isActive }) =&gt; ({ color: isActive ? &quot;#f00&quot; : &quot;&quot; })}&gt;登陆&lt;/NavLink&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {/* 3、Navigator 一出现，就会立刻跳转对应路径(配合逻辑判断使用) */}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {/* &lt;div&gt;{isToLogin ? &lt;Navigate to=&quot;/Login&quot; /&gt; : &quot;暂不跳转&quot;}&lt;/div&gt; */}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {/* 4、自己或通过js实现跳转 6.x版本类组件无法使用 hook useNavigate ,需要通过高阶组件*/} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;hr /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div className=&#x27;content&#x27;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {/* router2、映射关系表：path =&gt; Component */}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;Routes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;Route path=&#x27;/&#x27; element={&lt;Navigate to=&quot;/home&quot; /&gt;}&gt;&lt;/Route&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {/* 5.x  用 component 代替 element，还需要用属性 exact 精准匹配 */}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;Route path=&#x27;/home&#x27; element={&lt;Home&gt;&lt;/Home&gt;}&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &lt;Route path=&#x27;/home&#x27; element={&lt;Navigate to=&quot;/home/c1/456&quot; /&gt;}&gt;&lt;/Route&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            {/*动态路由传参*/}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &lt;Route path=&#x27;/home/c1/:id&#x27; element={&lt;HomeChild1&gt;&lt;/HomeChild1&gt;}&gt;&lt;/Route&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            {/*用于query传参*/}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &lt;Route path=&#x27;/home/c2&#x27; element={&lt;HomeChild2&gt;&lt;/HomeChild2&gt;}&gt;&lt;/Route&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;/Route&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;Route path=&#x27;/about&#x27; element={&lt;About&gt;&lt;/About&gt;}&gt;&lt;/Route&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;Route path=&#x27;/login&#x27; element={&lt;Login&gt;&lt;/Login&gt;}&gt;&lt;/Route&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;Route path=&#x27;*&#x27; element={&lt;NotFound&gt;&lt;/NotFound&gt;}&gt;&lt;/Route&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/Routes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div&gt;footer&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default index</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>封装高阶组件，时类组件也能用 react-router-dom 库提供的 hook</li></ol><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">// withRouter.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { useLocation, useNavigate, useParams, useSearchParams } from &#x27;react-router-dom&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 高阶组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default function withRouter(WarpperComponent) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return function (props) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 导航跳转</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const navigate = useNavigate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 获取动态路由参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const params = useParams();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 获取query参数(未解析)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const location = useLocation();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 获取解析好的query参数 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const [searchParams] = useSearchParams() // 返回一个数组，数组里有一些方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         *   URLSearchParams 接口定义了一些实用的方法来处理 URL 的查询字符串。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         *      searchParams.get(&#x27;a&#x27;) 得到对象a属性的值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         *      将 Object.fromEntries(searchParams.entries()) 数据转成对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const query = Object.fromEntries(searchParams.entries());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        const router = { navigate, params, location, query };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return &lt;WarpperComponent {...props} router={router} /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">// 使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import React, { PureComponent } from &#x27;react&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { Link, Outlet } from &#x27;react-router-dom&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { withRouter } from &#x27;../hoc&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export class Home extends PureComponent {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    navigateTo(path) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let { navigate } = this.props.router; // useNavigate 类组件不能用，通过高阶函数返回函数组件，传递过来</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        navigate(path);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    render() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div className=&#x27;home-header&#x27;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;Link to=&quot;/home/c1/123&quot;&gt;子路由1&lt;/Link&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;Link to=&quot;/home/c2?a=1&amp;b=2&quot;&gt;子路由2&lt;/Link&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;button onClick={e =&gt; this.navigateTo(&quot;/about&quot;)}&gt;js跳转&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;div className=&#x27;home-centert&#x27;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {/* 占位组件 类似vue的 router-view */}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;Outlet&gt;&lt;/Outlet&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default withRouter(Home)</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>路由配置</li><li>router5.x 需要安装<strong>react-router-config</strong>才能提取单独配置文件，6.x 直接就能用</li></ol><h3 class="anchor anchorWithStickyNavbar_cclw" id="react-hooks">React Hooks<a class="hash-link" href="#react-hooks" title="Direct link to heading">​</a></h3><blockquote><p>  hook ( hook into ) 钩入，意思是可以从其他地方，将保存好的状态钩入进来（如useState钩入状态）</p></blockquote><ol><li>Hook解决了<strong>类组件复杂的</strong>的问题，弥补了 <strong>函数组件</strong>一些不足的地方</li><li>可以在不编写class的情况下使用state状态管理，什么周期以及其他React特性</li><li>是否使用Hook是可选的，完全向下兼容，不需要将旧代码重构成hook</li></ol><blockquote><p>  注意事项</p></blockquote><ol><li>Hook能在<strong>函数组件</strong>中，并且是<strong>最外顶层</strong>使用，不能在<strong>类组件</strong> 或者 <strong>函数组件之外的地方</strong>使用</li><li>Hook也能在自定义hook中使用（React中必须是  useXxx 格式的函数名）</li></ol><h4 class="anchor anchorWithStickyNavbar_cclw" id="usestate">useState<a class="hash-link" href="#usestate" title="Direct link to heading">​</a></h4><blockquote><p>  设置与获取函数组件状态，从react中导入，是一个hook</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">import React, { useState } from &#x27;react&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *  useState</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *      参数：只有一个参数，初始化值，不设置位undefined</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *      返回值：数组，包含两个元素 [状态单前值，设置值的函数]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *      作用和 类组件的 this.state 是</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> *  点击button后做两件事情，通过 setCounter 重新设置值，同时将新的值返回过来，渲染到页面上</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function CountHook() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    const [counter, setCounter] = useState(0); // 首次 counter 变量 默认为0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                counterVal: {counter}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;button onClick={e =&gt; setCounter(counter + 1)}&gt;+1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;button onClick={e =&gt; setCounter(counter - 1)}&gt;-1&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export default CountHook</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_cclw" id="useeffect">useEffect<a class="hash-link" href="#useeffect" title="Direct link to heading">​</a></h4><blockquote><p>  由于生命周期中某阶段<strong>网路请求</strong>、<strong>手动更新DOM</strong>、<strong>事件监听</strong>，都是<strong>React更新DOM</strong>的<strong>副作用</strong>（Dide Effects）</p></blockquote><blockquote><p>  所有完成这些功能的Hook 官方称为 Effect Hook</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">// useEffect 主要是为了处理 以前生命周期的很多逻辑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">useEffect(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 当前回调函数绘制组件被渲染完成后，自动执行 （网络请求、DOM操作、事件监听）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    document.title = counter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 返回值，需要返回一个回调函数 ==&gt; 组件被重新渲染，或者组件被卸载的时候执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return () =&gt; { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 清除机制，做一些取消定时器，销毁的操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">useEffect(() =&gt; {})  // 可以多个 按顺序执行</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>  每次渲染组件，默认情况下都会走 effect，所以需要 effect 性能优化</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">// 参数二 ，第二次渲染是，只有在数组中的状态发生改变，才会再次执行 回调(空数组说明，永远不会再次执行了)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">useEffect(()=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log(&#x27;只执行一次，发生网络请求&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return () =&gt; { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        console.log(&#x27;只有组件被卸载才会执行&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">},[])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">useEffect(()=&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log(&#x27;counter 发生变化就会执行&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">},[counter]) // 有点像vue watch的 监听counter,状态发生改变就做一些事情</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_cclw" id="特殊场景使用的hook">特殊场景使用的hook<a class="hash-link" href="#特殊场景使用的hook" title="Direct link to heading">​</a></h4><blockquote><p>  useContext (子子孙孙传参)</p></blockquote><blockquote><p>  useImperativeHandle(作用子组件暴露一些方法，给父组件通过ref使用)</p></blockquote><blockquote><p>  useLayoutEffect ( <strong>useEffect</strong> 组件<strong>渲染完成</strong>之后执行里面，这个是在渲染DOM更新之前（阻塞），先做一些事情，再更新DOM)</p></blockquote><h4 class="anchor anchorWithStickyNavbar_cclw" id="性能优化hook">性能优化hook<a class="hash-link" href="#性能优化hook" title="Direct link to heading">​</a></h4><blockquote><p>  useRef（总是返回同一个对象，操作dom）、useCallback 和 useMemo</p></blockquote><h4 class="anchor anchorWithStickyNavbar_cclw" id="自定义hook">自定义hook<a class="hash-link" href="#自定义hook" title="Direct link to heading">​</a></h4><blockquote><p>  本质上只是<strong>函数代码逻辑的抽取</strong></p></blockquote><h4 class="anchor anchorWithStickyNavbar_cclw" id="react18-新增-hook">React18 新增 hook<a class="hash-link" href="#react18-新增-hook" title="Direct link to heading">​</a></h4><blockquote><p>  useId （只有早SSR同构应用中使用，生成横跨客户端和服务端的唯一ID,并且避免 hydration 不匹配的问题）</p></blockquote><blockquote><p>  useTransition （）</p></blockquote><h4 class="anchor anchorWithStickyNavbar_cclw" id="redux-hook">redux hook<a class="hash-link" href="#redux-hook" title="Direct link to heading">​</a></h4><blockquote><p>  以前必须通过 react-redux 的 connect 编写 mapStateToProps 和 mapDispatchToProps 管理 react 和 redux</p></blockquote><h5 class="anchor anchorWithStickyNavbar_cclw" id="useselector">useSelector<a class="hash-link" href="#useselector" title="Direct link to heading">​</a></h5><blockquote><p>  可以将 state 映射到组件中</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">// useSelector 代替 mapStateToProps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 默认情况下useSelect监听的是整个state，当某个组件状态发生改变时，所有使用useSelector的子组件都会重新渲染</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const { homename, banners } = useSelector((state) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        homename: state.home.homename,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        banners: state.home.banners</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// shallowEqual 比较数据是否发生改变，不受其他组件状态变化影响，比较自己的状态如果没变化，就不需要重新渲染</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const { homename, banners } = useSelector((state) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        homename: state.home.homename,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        banners: state.home.banners</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">},shallowEqual)</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_cclw" id="usedispatch">useDispatch<a class="hash-link" href="#usedispatch" title="Direct link to heading">​</a></h5><blockquote><p>  直接获取dispatch函数</p></blockquote><div class="language-react codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-react codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">// useDispatch 代替 mapDispatchToProps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const dispatch = useDispatch();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function view_change_name(name) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dispatch(changeHomeNameAction(name))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_cclw" id="react-cli">React ClI<a class="hash-link" href="#react-cli" title="Direct link to heading">​</a></h3><blockquote><p>  建筑学的概念，表示搭建建筑物时，<strong>临时搭建</strong>出来的<strong>一个框架</strong>，处理里一些问题，</p></blockquote><ul><li>目录机构组织</li><li>管理文件直接的相互依赖</li><li>管理第三方依赖</li><li>发布前的压缩打包。。。</li><li>浏览器不认识的代码转换</li><li>所有webpack相关的都存到 <code>react-scripts</code> 中了，<code>执行 npm run </code>就可以弹出，就能看到了，<strong>不可逆</strong></li></ul><blockquote><p>  PWA</p></blockquote><ul><li><code>Progressive Web App</code> 渐进式WEB应用</li><li>首先是一个<strong>网页</strong>，通过<strong>Web技术编写</strong>出一个<strong>网页应用</strong></li><li>随后添加<strong>App Manifest</strong> 和 <strong>Service Worker</strong> 来实现<strong>安装和离线缓存</strong>等功能 <ul><li>App Manifest：手机上某些浏览器（如Google）右上角更多里面，将页面添加到桌面，看上去就跟app差不多</li><li>Service Worker：当没网的时候打开这个Web App，还能看到上一次浏览的一些东西</li></ul></li><li>这种Web存在的形式 称为 <strong>Web App</strong></li><li>作用: 添加到<strong>主屏幕</strong>、<strong>离线缓存</strong>、<strong>消息推送</strong>等 一系列NativeApp的相关功能</li></ul><h4 class="anchor anchorWithStickyNavbar_cclw" id="create-react-appcra">create-react-app(CRA)<a class="hash-link" href="#create-react-appcra" title="Direct link to heading">​</a></h4><div class="language-shell codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-shell codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 1、全局安装 npm install create-react-app -g</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 2、创建 create-react-app &lt;object-name&gt;    - 不允许存在大写字母</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 3、 cd   yarn start</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 目录结构</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#     public 一些静态文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#         index.html、favicon.ico 入口文件，标题图标</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#         两个logo.png、manifest.json 都是配置 PWA的一些资源样式配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#         robots.txt 告诉搜索引擎哪些东西可以被爬虫爬</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#     src  源码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># eject 后多出     </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#     config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#     scripts</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_cclw" id="ssr">SSR<a class="hash-link" href="#ssr" title="Direct link to heading">​</a></h3><blockquote><p>  服务端渲染，Vue/React   =&gt; nuxt/next</p></blockquote><p>xxx =&gt; 前后端分离 =&gt; SPA:单页面富应用 </p><p>SPA应用存在的问题</p><p>1、首屏的渲染速度</p><p>早期SSR页面(JSP 那种)，在服务器将整个网站都渲染好，请求的时候拿到的就是完整的页面，有利于SEO优化</p><p>SPA页面: 加载页面 --&gt;下载页面中引入的bundle.js --&gt; 浏览器执行下载的代码 --&gt; 执行完成才能渲染处理 ，导致速度慢</p><p>2、SEO优化问题</p><p>当页面应用的数据都是通过js文件生成的，搜索引擎收入的只有index.html页面 ，只有数据顶级挂载点，和一些基础信息，SPA网站的内容是爬取不到的，所有被匹配到的东西很少，导致排名很靠后</p><blockquote><p>  SSR 解决了 SPA 的这些问题</p></blockquote><p>借助node生成html页面，浏览器直接显示，浏览器不需要下载执行的步骤了 </p><blockquote><p>  实现步骤</p></blockquote><ul><li><p>SSR同构应用(可以运行在服务器，也能运行在客户端)</p><div class="codeBlockContainer_lznB theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_CQ_s"><pre tabindex="0" class="prism-code language-text codeBlock_Zn2u thin-scrollbar"><code class="codeBlockLines_l697"><span class="token-line" style="color:#393A34"><span class="token plain">    -   在服务器获取网络资源，生成dom字符串（无法交互）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -   客户端也会运行一次，将交互的操作匹配到服务器生成的dom字符串中（**hydration**）</span><br></span></code></pre><div class="buttonGroup_h_YJ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_znN4" aria-hidden="true"><svg class="copyButtonIcon_zVJ1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_e7BF" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithStickyNavbar_cclw" id="配置">配置<a class="hash-link" href="#配置" title="Direct link to heading">​</a></h3><blockquote><p>  sass 直接 <code>npm i sass</code> 安装就能使用</p></blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/web/react/react-docs.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_qjoQ" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vedB"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/web/media-webrtc"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">webrtc</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/web/style/style-css3"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CSS3</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_MFax thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#简介" class="table-of-contents__link toc-highlight">简介</a></li><li><a href="#组件" class="table-of-contents__link toc-highlight">组件</a></li><li><a href="#jsx" class="table-of-contents__link toc-highlight">JSX</a></li><li><a href="#过渡动画" class="table-of-contents__link toc-highlight">过渡动画</a></li><li><a href="#react-中的-css" class="table-of-contents__link toc-highlight">React 中的 CSS</a></li><li><a href="#redux-状态管理" class="table-of-contents__link toc-highlight">Redux 状态管理</a></li><li><a href="#react-router-6x" class="table-of-contents__link toc-highlight">React Router 6.x</a></li><li><a href="#react-hooks" class="table-of-contents__link toc-highlight">React Hooks</a></li><li><a href="#react-cli" class="table-of-contents__link toc-highlight">React ClI</a></li><li><a href="#ssr" class="table-of-contents__link toc-highlight">SSR</a></li><li><a href="#配置" class="table-of-contents__link toc-highlight">配置</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/other-weblinks">收藏网址</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/other/other-markdown">Markdown</a></li></ul></div><div class="col footer__col"><div class="footer__title">外部链接</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/liaozhongxun" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Boxg"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/lzo-gitee" target="_blank" rel="noopener noreferrer" class="footer__link-item">码云<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Boxg"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://lzo-gitee.gitee.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">码云WEB<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Boxg"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://lzo-gitee.gitee.io/gitee-static/images/home.png" target="_blank" rel="noopener noreferrer" class="footer__link-item">码云 WEB static BasePath<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_Boxg"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">博客</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ac6f8ec9.js"></script>
<script src="/assets/js/main.26970de1.js"></script>
</body>
</html>